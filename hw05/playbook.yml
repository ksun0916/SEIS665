---
- name: assignment 5 part 1
  hosts: all
  become: yes
  vars: 
      administrator_name: corpadmin
  tasks:
    - name: update
      yum: name=* state=present
    - name: create password
      user:
        name: administrator_name
        password: seis665

- name: assignment 5 part 2
  hosts: web1
  become: yes
  tasks:
    - name: install nginx
      yum: name=nginx state=installed
    - name: copy j2 template
      template: src=default.conf.j2 dest=/etc/nginx/conf.d/default.conf
    - name: nginx auto start
      service: name=nginx enabled=yes state=started

- name: assignment 5 part 3
  hosts: database1
  become: yes
  tasks:
    - name: install mysql
      yum: name=mysql-server state=installed
    - name: mysql auto start
      service: name=mysqld enabled=yes state=started
    - name: create directories
      file: path={{ item }} state=directory
      with_items:
        - /var/data/client1
        - /var/data/client2
        - /var/data/client3
        - /var/data/client4
        - /var/data/client5
